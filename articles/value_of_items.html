<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="BGSmartR">
<title>Adding value to items in a collection • BGSmartR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Adding value to items in a collection">
<meta property="og:description" content="BGSmartR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">BGSmartR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Matching.html">Method of Matching taxonomic records</a>
    <a class="dropdown-item" href="../articles/Creating_enrich_databases.html">Creating_enrich_databases</a>
    <a class="dropdown-item" href="../articles/value_of_items.html">Adding value to items in a collection</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="value_of_items_files/htmlwidgets-1.6.2/htmlwidgets.js"></script><link href="value_of_items_files/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="value_of_items_files/datatables-binding-0.30/datatables.js"></script><link href="value_of_items_files/dt-core-1.13.4/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="value_of_items_files/dt-core-1.13.4/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="value_of_items_files/dt-core-1.13.4/js/jquery.dataTables.min.js"></script><link href="value_of_items_files/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="value_of_items_files/crosstalk-1.2.0/js/crosstalk.min.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Adding value to items in a collection</h1>
            
      
      
      <div class="d-none name"><code>value_of_items.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jakepowellcubg.github.io/BGR/">BGSmartR</a></span><span class="op">)</span></span></code></pre></div>
<p>This vignette details how to give items in a collection a value
dependent on multiple columns from it. This can be used to understand
the importance of individual plants to a collection or to even give a
collection a numeric score.</p>
<p>Since the variables that determine the importance of plants in a
collection depends heavily on the aim of it we want to create a flexible
value system. For example one collection may concentrate only on
threatened species and does not care whether their plants are
endemic.</p>
<p>Within BGSmartR, we have <code><a href="../reference/value_of_items.html">value_of_items()</a></code> which takes as
input a <code>collection</code> and the so-called
<code>dependents</code>. <code>dependents</code> contains the scoring
system to obtain the value of items in the collection. In particular it
is a list of lists, where each sub-list contains the how to generate a
score from a single column in the collection. The score from a single
column is a list that must contain:</p>
<ul>
<li>
<code>$column</code> the column in the <code>collection</code> we
are generating a score from</li>
<li>
<code>$weight</code> the weight of this score (multiplier), relative
to other columns.</li>
<li>
<code>$details</code> a data frame detailing the score for
particular values found in the column. Where the values to match to the
column are found in <code>names</code> and the score is contained in
<code>value</code>.</li>
<li>
<code>$type</code> The method for matching/finding entries in the
column. Allowable values are <code>'Exact'</code>,
<code>'Number range (int)'</code> and <code>'Grepl'</code>.</li>
</ul>
<p>To understand what this means we shall go through an example
below.</p>
<hr>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>We first need to load a collection.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load a sample collection.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/load.html" class="external-link">load</a></span><span class="op">(</span><span class="st">'data/value_of_items_collection_example.rda'</span><span class="op">)</span></span></code></pre></div>
<p>We want the value of items in our collection to depend on the
provenance, endemism, rarity of taxa globally and whether items are
threatened.</p>
<p>Each of these dependents are contained within the
<code>collection</code>. So we need to create a “sub-list” outlined
above for each.</p>
<ul>
<li>Provenance</li>
</ul>
<p>Within <code>collection</code> there is a column called
<code>ProvenanceCode</code> which contains the values “G”, “U”, “W”, “Z”
corresponding to plants that are of garden origin, unknown origin,
wild-derived origin and wild origin respectively. We value W &gt; Z &gt;
G &gt; U. Therefore we will give values: <code>W = 1</code>,
<code>Z = 0.5</code>, <code>G = 0.1</code> and <code>U = 0</code>. For
now we will give each column the same weight equal to one. Here we want
to exactly match these codes to the values within
<code>ProvenanceCode</code> so we set <code>type = 'Exact'</code>.</p>
<p>Within R this comes to</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Provenance.</span></span>
<span><span class="va">provenance</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>column <span class="op">=</span> <span class="st">'ProvenanceCode'</span>, weight <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                  details <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"G"</span>, <span class="st">"U"</span>, <span class="st">"W"</span>, <span class="st">"Z"</span><span class="op">)</span>, value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span>, type <span class="op">=</span> <span class="st">'Exact'</span><span class="op">)</span></span>
<span><span class="va">provenance</span></span>
<span><span class="co">#&gt; $column</span></span>
<span><span class="co">#&gt; [1] "ProvenanceCode"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $weight</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $details</span></span>
<span><span class="co">#&gt;   names value</span></span>
<span><span class="co">#&gt; 1     G   0.1</span></span>
<span><span class="co">#&gt; 2     U   0.0</span></span>
<span><span class="co">#&gt; 3     W   1.0</span></span>
<span><span class="co">#&gt; 4     Z   0.5</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $type</span></span>
<span><span class="co">#&gt; [1] "Exact"</span></span></code></pre></div>
<ul>
<li>Endemism</li>
</ul>
<p>A plant is endemic if it comes from a single region. Currently, there
is not a column within the collection stating whether the item is
endemic or not. So will will have to create a new column to be able to
use this as a scoring condition. Note that the column
<code>POWO_Dist_000_area_code_l3</code> is a string of all the level 3
area codes that a plant is found in. Moreover, each code has length
three (e.g. MLW, MOZ, ZIM). Therefore to extract the endemic items we
need to search for records that have only a single code. In other words
<code>POWO_Dist_000_area_code_l3</code> only has length three.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Endemism.</span></span>
<span><span class="va">collection</span><span class="op">$</span><span class="va">endemic</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">'Not endemic'</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">collection</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">endemic_index</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_length.html" class="external-link">str_length</a></span><span class="op">(</span><span class="va">collection</span><span class="op">$</span><span class="va">POWO_Dist_000_area_code_l3</span><span class="op">)</span> <span class="op">==</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">collection</span><span class="op">$</span><span class="va">endemic</span><span class="op">[</span><span class="va">endemic_index</span><span class="op">]</span> <span class="op">=</span> <span class="st">'Endemic'</span></span>
<span></span>
<span><span class="va">endemism</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>column <span class="op">=</span> <span class="st">'endemic'</span>, weight <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                  details <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>names <span class="op">=</span> <span class="st">'Endemic'</span>, value <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>, type <span class="op">=</span> <span class="st">'Exact'</span><span class="op">)</span></span>
<span><span class="va">endemism</span></span>
<span><span class="co">#&gt; $column</span></span>
<span><span class="co">#&gt; [1] "endemic"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $weight</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $details</span></span>
<span><span class="co">#&gt;     names value</span></span>
<span><span class="co">#&gt; 1 Endemic     1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $type</span></span>
<span><span class="co">#&gt; [1] "Exact"</span></span></code></pre></div>
<ul>
<li>Rarity of taxa globally</li>
</ul>
<p>The rarity is contained in the column <code>no_gardens</code> which
givens the number of collections globally that a plant is found in. This
is a value between 1 and 175. We could give each number of gardens a
value and have a large <code>details</code> data frame, however this
would be a bit clumbersome. Therefore in this case we change to
<code>type = 'Number range (int)'</code> where the names are now given
in the format <code>XX:YY</code> specifying a range of numbers that have
the same value.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## 3) Rarity.</span></span>
<span><span class="va">rarity</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>column <span class="op">=</span> <span class="st">'no_gardens'</span>, weight <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                  details <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'0:10'</span>, <span class="st">'11:50'</span>, <span class="st">'50:1000'</span><span class="op">)</span>, value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">0.5</span>,<span class="fl">0.1</span><span class="op">)</span><span class="op">)</span>, type <span class="op">=</span> <span class="st">'Number range (int)'</span><span class="op">)</span></span>
<span><span class="va">rarity</span></span>
<span><span class="co">#&gt; $column</span></span>
<span><span class="co">#&gt; [1] "no_gardens"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $weight</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $details</span></span>
<span><span class="co">#&gt;     names value</span></span>
<span><span class="co">#&gt; 1    0:10   1.0</span></span>
<span><span class="co">#&gt; 2   11:50   0.5</span></span>
<span><span class="co">#&gt; 3 50:1000   0.1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $type</span></span>
<span><span class="co">#&gt; [1] "Number range (int)"</span></span></code></pre></div>
<ul>
<li>Threatened</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">## 4) Threatened.</span></span>
<span><span class="va">threatened</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>column <span class="op">=</span> <span class="st">'POWO_Red_category'</span>, weight <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                  details <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'EW'</span>, <span class="st">'CR'</span>, <span class="st">'EN'</span>, <span class="st">'VU'</span>, <span class="st">'NT'</span><span class="op">)</span>, value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0.9</span>, <span class="fl">0.8</span>, <span class="fl">0.7</span>, <span class="fl">0.3</span><span class="op">)</span><span class="op">)</span>, type <span class="op">=</span> <span class="st">'Exact'</span><span class="op">)</span></span>
<span><span class="va">threatened</span></span>
<span><span class="co">#&gt; $column</span></span>
<span><span class="co">#&gt; [1] "POWO_Red_category"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $weight</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $details</span></span>
<span><span class="co">#&gt;   names value</span></span>
<span><span class="co">#&gt; 1    EW   1.0</span></span>
<span><span class="co">#&gt; 2    CR   0.9</span></span>
<span><span class="co">#&gt; 3    EN   0.8</span></span>
<span><span class="co">#&gt; 4    VU   0.7</span></span>
<span><span class="co">#&gt; 5    NT   0.3</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $type</span></span>
<span><span class="co">#&gt; [1] "Exact"</span></span></code></pre></div>
<p>So now we have all our individual scoring dependents we contain these
into one list detailing the scoring system.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Combine.</span></span>
<span><span class="va">dependents</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>provenance <span class="op">=</span> <span class="va">provenance</span>, endemism  <span class="op">=</span> <span class="va">endemism</span>, rarity <span class="op">=</span> <span class="va">rarity</span>, threatened <span class="op">=</span> <span class="va">threatened</span><span class="op">)</span></span></code></pre></div>
<p>We can now use <code>dependents</code> as an input to
<code><a href="../reference/value_of_items.html">value_of_items()</a></code> to calculate the value of each item in the
collection.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">values</span> <span class="op">=</span> <span class="fu">BGSmartR</span><span class="fu">::</span><span class="fu"><a href="../reference/value_of_items.html">value_of_items</a></span><span class="op">(</span><span class="va">collection</span>, <span class="va">dependents</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Show total value of first 10 items.</span></span>
<span><span class="va">values</span><span class="op">$</span><span class="va">total_value</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span>
<span><span class="co">#&gt;  [1] 0.2 0.1 0.2 0.1 0.6 0.6 1.4 0.2 2.0 0.8</span></span>
<span></span>
<span><span class="co"># Show breakdown of value for first 10 items</span></span>
<span><span class="va">values</span><span class="op">$</span><span class="va">value_breakdown</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,<span class="op">]</span></span>
<span><span class="co">#&gt;    provenance endemism rarity threatened</span></span>
<span><span class="co">#&gt; 1         0.1        0    0.1        0.0</span></span>
<span><span class="co">#&gt; 2         0.1        0    0.0        0.0</span></span>
<span><span class="co">#&gt; 3         0.1        0    0.1        0.0</span></span>
<span><span class="co">#&gt; 4         0.1        0    0.0        0.0</span></span>
<span><span class="co">#&gt; 5         0.1        0    0.5        0.0</span></span>
<span><span class="co">#&gt; 6         0.1        0    0.5        0.0</span></span>
<span><span class="co">#&gt; 7         1.0        0    0.1        0.3</span></span>
<span><span class="co">#&gt; 8         0.1        0    0.1        0.0</span></span>
<span><span class="co">#&gt; 9         1.0        0    1.0        0.0</span></span>
<span><span class="co">#&gt; 10        0.0        0    0.1        0.7</span></span></code></pre></div>
<p>We can then add the value to the collection to be used in further
analysis</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">collection</span><span class="op">$</span><span class="va">value</span> <span class="op">=</span> <span class="va">values</span><span class="op">$</span><span class="va">total_value</span></span></code></pre></div>
<p>We can then use this to find the items in the collection with the
largest value.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">top100_index</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rev.html" class="external-link">rev</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/order.html" class="external-link">order</a></span><span class="op">(</span><span class="va">collection</span><span class="op">$</span><span class="va">value</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">]</span></span>
<span><span class="va">top100_value</span> <span class="op">=</span> <span class="va">collection</span><span class="op">[</span><span class="va">top100_index</span>,<span class="op">]</span></span></code></pre></div>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-336b59bd4ad8f372177e" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-336b59bd4ad8f372177e">{"x":{"filter":"none","vertical":false,"data":[["Eriospermum multifidum","Drosera dichrosepala","Brugmansia versicolor","Gasteria barbae","Lewisia cotyledon var. heckneri","Limonium saracinatum","Rhodocoma foliosa","Fritillaria mutabilis","Tritonia flabellifolia","Tropaeolum azureum","Canarina canariensis","Allagopappus canariensis","Androsace sp.","Lepidozia reptans","Gentiana lutea subsp. symphyandra","Alchemilla abyssinica","Amorphophallus titanum","Calypogeia fissa","Tilingia ajanensis","Eriogonum saxatile","Acaena fissistipula","Pelargonium grandiflorum","Lilium mackliniae","Leopoldia comosa","Carex flava","Ranunculus auricomus","Clematis sp.","Pinguicula vulgaris","Nolina texana","Begonia convolvulacea","Aechmea fendleri","Trientalis europaea","Erodium chrysanthum","Chamaecyparis obtusa","Ferocactus peninsulae","Sempervivum pittonii","Cistus × ledon","Scilla autumnalis","Cyclamen coum","Bellis perennis","Sisyrinchium micranthum","Cremanthodium sp.","Carex depauperata","Cola heterophylla","Campanula argyrotricha","Gossypium hirsutum","Pterocarya fraxinifolia","Viburnum × rhytidophylloides","Echinacea pallida","Fritillaria assyriaca","Drosera rotundifolia","Reseda odorata","Symphytum grandiflorum","Dianthus gratianopolitanus","Ribes orientale","Sarracenia rubra subsp. rubra","Euphorbia epithymoides","Salvia clevelandii","Nannorrhops ritchieana","Hertia cheirifolia","Mammillaria decipiens","Verbena hastata","Catalpa bignonioides","Equisetum hyemale","Primula denticulata","Ferocactus pilosus","Tilia tomentosa","Viburnum lentago","Reineckea carnea","Mimosa pudica","Crithmum maritimum","Sanguisorba canadensis","Helleborus orientalis","Scilla mischtschenkoana","Hylocereus undatus","Cynara scolymus","Fritillaria pallidiflora","Digitalis purpurea","Lonicera involucrata","Lathyrus tuberosus","Phlox 'Emerald Cushion'","Bergenia crassifolia × B. purpurascens","Echinacea purpurea 'Rubinstern'","Geranium × magnificum 'Hylander'","Narcissus 'Falconet'","Anemone × hybrida 'Robustissima'","Cyclamen persicum","Canna × generalis [Green leaf form]","Rudbeckia triloba 'Takao'","Ephedra distachya subsp. distachya","Iris 'Indiana Night'","Forsythia viridissima 'Bronxensis'","Lavandula angustifolia subsp. angustifolia 'Mailette'","Aspidistra elatior 'Milky Way'","Grevillea thelemanniana [Spriggs form]","Carpinus betulus 'Fastigiata'","Lavandula dentata [Silver form]","Dryopteris wallichiana subsp. nepalensis","Deutzia scabra 'Plena'","Tulipa orphanidea 'Hageri'"],["Eriospermum multifidum Marloth","Drosera dichrosepala Turcz.","Brugmansia versicolor (Lagerh.) Saff.","Gasteria barbae Van Jaarsv.","Lewisia cotyledon (Wats.) Rob. var. heckneri (C.Morton) Munz","Limonium saracinatum P.Artelari","Rhodocoma foliosa (N.E.Br.) H.P.Linder &amp; C.R.Hardy","Fritillaria mutabilis G.Kamari","Tritonia flabellifolia (Delaroche) G.Lewis","Tropaeolum azureum Miers","Canarina canariensis (L.) Vatke","Allagopappus canariensis (Willd.) Greuter","Androsace sp.","Lepidozia reptans (L.) Dumort.","Gentiana lutea L. subsp. symphyandra Murb.","Alchemilla abyssinica Fresen.","Amorphophallus titanum (Becc.) Becc.","Calypogeia fissa (L.) Raddi","Tilingia ajanensis Regel &amp; Til.","Eriogonum saxatile S.Watson","Acaena fissistipula Bitter","Pelargonium grandiflorum Willd.","Lilium mackliniae Sealy","Leopoldia comosa Parl.","Carex flava","Ranunculus auricomus L.","Clematis sp.","Pinguicula vulgaris L.","Nolina texana S.Watson","Begonia convolvulacea A.DC.","Aechmea fendleri AndrÃ© ex Mez","Trientalis europaea L.","Erodium chrysanthum L'HÃ©r.","Chamaecyparis obtusa Siebold &amp; Zucc.","Ferocactus peninsulae (Web.) Br. &amp; R.","Sempervivum pittonii Schott, Nym. &amp; Kotschy","Cistus Ã— ledon Lam.","Scilla autumnalis L.","Cyclamen coum Mill.","Bellis perennis L.","Sisyrinchium micranthum Cav.","Cremanthodium sp.","Carex depauperata With.","Cola heterophylla (P.Beauv.) Schott &amp; Endl","Campanula argyrotricha","Gossypium hirsutum L.","Pterocarya fraxinifolia (Lam.) Spach","Viburnum Ã— rhytidophylloides Sur.","Echinacea pallida (Nutt.) Nutt.","Fritillaria assyriaca Baker","Drosera rotundifolia L.","Reseda odorata L.","Symphytum grandiflorum DC.","Dianthus gratianopolitanus Vill.","Ribes orientale Desf.","Sarracenia rubra Walter subsp. rubra","Euphorbia epithymoides L.","Salvia clevelandii Greene","Nannorrhops ritchieana (Griff.) Aitch.","Hertia cheirifolia Kuntze","Mammillaria decipiens Scheidweiler","Verbena hastata L.","Catalpa bignonioides Walt.","Equisetum hyemale L.","Primula denticulata Sm.","Ferocactus pilosus Galeotti ex Salm-Dyck) Werdermann","Tilia tomentosa Moench","Viburnum lentago L.","Reineckea carnea Kunth","Mimosa pudica L.","Crithmum maritimum L.","Sanguisorba canadensis L.","Helleborus orientalis Lam.","Scilla mischtschenkoana Grossh.","Hylocereus undatus (Haw.) Britton &amp; Rode","Cynara scolymus L.","Fritillaria pallidiflora Schrenk","Digitalis purpurea L.","Lonicera involucrata (Richards.) Spreng.","Lathyrus tuberosus L.","Phlox 'Emerald Cushion'","Bergenia crassifolia (L.) Fritsch Ã— B. purpurascens (Hook.f. &amp; Thoms.) Engl.","Echinacea purpurea (L.) Moench 'Rubinstern'","Geranium Ã— magnificum Hylander 'Hylander'","Narcissus 'Falconet'","Anemone Ã— hybrida 'Robustissima'","Cyclamen persicum Mill.","Canna Ã— generalis L.H.Bailey [Green leaf form]","Rudbeckia triloba L. 'Takao'","Ephedra distachya L. subsp. distachya","Iris 'Indiana Night'","Forsythia viridissima Lindl. 'Bronxensis'","Lavandula angustifolia Mill. subsp. angustifolia 'Mailette'","Aspidistra elatior Blume 'Milky Way'","Grevillea thelemanniana Endl. [Spriggs form]","Carpinus betulus L. 'Fastigiata'","Lavandula dentata L. [Silver form]","Dryopteris wallichiana subsp. nepalensis Fraser-Jenk.","Deutzia scabra Thunb. 'Plena'","Tulipa orphanidea Heldr. 'Hageri'"],["W","G","G","Z","W","Z","G","G","G","G","W","G","W","W","W","W","G","W","W","W","G","G","G","W","W","W","W","W","W","W","W","W","U","W","G","G","G","W","W","W","G","W","Z","U","U","G","U","G","Z","G","Z","G","G","Z","G","G","G","G","G","U","U","G","G","G","G","G","G","G","G","G","G","G","G","G","G","G","G","G","G","G","G","G","G","G","G","G","U","G","G","G","G","G","G","G","G","G","G","G","G","G"],["534851-1","321827-1","37444-2","77144127-1","139316-2","904589-1","77108755-1","968094-1","441697-1","308638-2","141368-1","50426466-2",null,null,"77250314-1","720333-1","84456-1",null,"849400-1","694410-1","719992-1","376255-1","537650-1","538476-1","30043428-2","712265-1",null,"526527-1","538758-1","104456-1","5441-2","77100395-1","372212-1","261845-1","103659-2","276595-1","168343-1","961855-1","700707-1","184409-1","330260-2",null,"299427-1","822704-1","139926-1","30042843-2","442471-1","149901-1","202374-1","535065-1","319182-2","715569-1","120788-1","153408-1","792893-1","77227797-1","346404-1","226502-2","60468188-2","213864-1","150844-2","865207-1","30194969-2","92939-2","701821-1","133173-1","835608-1","326266-2","540365-1","313242-2","840827-1","741345-1","711354-1","540920-1","77163184-1","77180272-1","535262-1","802077-1","143461-2","502065-1",null,null,null,null,null,null,"700765-1",null,null,"77169580-1",null,null,null,null,null,null,null,"17569970-1",null,null],["Eriospermum multifidum","Drosera dichrosepala","Brugmansia versicolor","Gasteria barbae","Lewisia cotyledon var. heckneri","Limonium saracinatum","Rhodocoma foliosa","Fritillaria mutabilis","Tritonia flabellifolia","Tropaeolum azureum","Canarina canariensis","Allagopappus canariensis",null,null,"Gentiana lutea subsp. symphyandra","Alchemilla abyssinica","Amorphophallus titanum",null,"Tilingia ajanensis","Eriogonum saxatile","Acaena fissistipula","Pelargonium grandiflorum","Lilium mackliniae","Muscari comosum","Carex flava","Ranunculus auricomus",null,"Pinguicula vulgaris","Nolina texana","Begonia convolvulacea","Aechmea fendleri","Lysimachia europaea","Erodium chrysanthum","Chamaecyparis obtusa","Ferocactus peninsulae","Sempervivum pittonii","Cistus × ledon","Prospero autumnale","Cyclamen coum","Bellis perennis","Sisyrinchium micranthum",null,"Carex depauperata","Cola heterophylla","Campanula argyrotricha","Gossypium hirsutum","Pterocarya fraxinifolia","Viburnum × rhytidophylloides","Echinacea pallida","Fritillaria assyriaca","Drosera rotundifolia","Reseda odorata","Symphytum grandiflorum","Dianthus gratianopolitanus","Ribes orientale","Sarracenia rubra subsp. rubra","Euphorbia epithymoides","Salvia clevelandii","Nannorrhops ritchieana","Hertia cheirifolia","Mammillaria decipiens","Verbena hastata","Catalpa bignonioides","Equisetum hyemale","Primula denticulata","Ferocactus pilosus","Tilia tomentosa","Viburnum lentago","Reineckea carnea","Mimosa pudica","Crithmum maritimum","Sanguisorba canadensis","Helleborus orientalis","Scilla mischtschenkoana","Selenicereus undatus","Cynara cardunculus subsp. cardunculus","Fritillaria pallidiflora","Digitalis purpurea","Lonicera involucrata","Lathyrus tuberosus",null,null,null,null,null,null,"Cyclamen persicum",null,null,"Ephedra distachya subsp. distachya",null,null,null,null,null,null,null,"Dryopteris wallichiana subsp. nepalensis",null,null],["1.species","1.species","1.species","1.species","3.var","1.species","1.species","1.species","1.species","1.species","1.species","1.species","0.indet","1.species","2.subsp","1.species","1.species","1.species","1.species","1.species","1.species","1.species","1.species","1.species","1.species","1.species","0.indet","1.species","1.species","1.species","1.species","1.species","1.species","1.species","1.species","1.species","6.hybrid","1.species","1.species","1.species","1.species","0.indet","1.species","1.species","1.species","1.species","1.species","6.hybrid","1.species","1.species","1.species","1.species","1.species","1.species","1.species","2.subsp","1.species","1.species","1.species","1.species","1.species","1.species","1.species","1.species","1.species","1.species","1.species","1.species","1.species","1.species","1.species","1.species","1.species","1.species","1.species","2.subsp","1.species","1.species","1.species","1.species","5.cultivar","6.hybrid","5.cultivar","5.cultivar, 6.hybrid","5.cultivar","5.cultivar, 6.hybrid","1.species","5.cultivar, 6.hybrid","5.cultivar","2.subsp","5.cultivar","5.cultivar","2.subsp, 5.cultivar","5.cultivar","5.cultivar","5.cultivar","5.cultivar","2.subsp","5.cultivar","5.cultivar"],["CPP","WAU","ECU","CPP","CAL","GRC","CPP","GRC","CPP","CLC","CNY","CNY",null,null,"ALB, BUL, GRC, YUG, TUR","ETH, KEN, UGA","SUM",null,"CTA, IRK, YAK, AMU, KAM, KHA, KUR, MAG, PRM, SAK, CHM, CHN, JAP, KOR, ALU","CAL, NEV","NZS","CPP","ASS","AUT, CZE, GER, HUN, SWI, BAL, COR, FRA, POR, SAR, SPA, ALB, BUL, GRC, ITA, KRI, ROM, SIC, TUE, YUG, KRY, UKR, ALG, EGY, LBY, MOR, TUN, CNY, CYP, EAI, IRN, IRQ, LBS, PAL, SIN, TUR","DEN, FIN, FOR, GRB, ICE, NOR, SWE, AUT, BGM, CZE, GER, HUN, NET, POL, SWI, COR, FRA, SPA, ALB, BUL, GRC, ITA, ROM, YUG, BLT, KRY, RUC, RUN, RUS, RUW, ALG, MOR, YAK, NCS, TCS, IRN, TUR, ASK, NUN, ABT, BRC, MAN, LAB, NBR, NFL, NSC, ONT, PEI, QUE, IDA, MNT, MIN, WIS, CNT, INI, MAI, MAS, MIC, NWH, NWJ, NWY, OHI, PEN, RHO, VER","FIN, NOR, SWE",null,"DEN, FIN, FOR, GRB, ICE, IRE, NOR, SWE, AUT, BGM, CZE, GER, HUN, NET, POL, SWI, FRA, POR, SPA, ITA, ROM, YUG, BLR, BLT, RUE, RUN, RUW, UKR, BRY, IRK, KRA, TVA, WSB, YAK, MON, ASK, GNL, NUN, NWT, YUK, ABT, BRC, MAN, SAS, LAB, NBR, NFL, NSC, ONT, QUE, MIN, WIS, MAI, MIC, NWH, NWY, VER","COL, NWM, TEX, MXE, MXN","BZL, BZS","TRT, VNA, VEN","DEN, FIN, GRB, ICE, NOR, SWE, AUT, BGM, CZE, GER, NET, POL, SWI, FRA, ITA, ROM, BLR, BLT, RUC, RUE, RUN, RUW, UKR, ALT, BRY, CTA, IRK, KRA, TVA, WSB, YAK, AMU, KAM, KHA, KUR, MAG, PRM, SAK, KAZ, CHI, CHM, CHN, MON, JAP, KOR, ALU, ASK, GNL, NWT, YUK, ABT, BRC, SAS, IDA, ORE, WAS, CAL","GRC","JAP, TAI","MXN","AUT","FRA, MOR","GRB, HUN, BAL, COR, FRA, POR, SAR, SPA, ALB, BUL, GRC, ITA, KRI, ROM, SIC, TUE, YUG, KRY, UKR, ALG, LBY, MOR, TUN, NCS, TCS, CYP, EAI, LBS, PAL, TUR","BUL, TUE, KRY, RUS, NCS, TCS, LBS, PAL, TUR","DEN, GRB, IRE, NOR, SWE, AUT, BGM, CZE, GER, HUN, NET, POL, SWI, BAL, COR, FRA, POR, SAR, SPA, ALB, BUL, GRC, ITA, KRI, ROM, SIC, TUE, YUG, BLR, BLT, KRY, RUC, RUE, RUN, RUS, RUW, UKR, MOR, MDR, KAZ, KGZ, TKM, TZK, UZB, NCS, TCS, CYP, EAI, IRN, IRQ, LBS, PAL, TUR","MXC, MXE, MXG, MXS, MXT, COS, ELS, GUA, HON, NIC, PAN, VEN, BOL, CLM, ECU, PER, BZL, BZS, AGE, AGW, PAR",null,"GRB, IRE, BGM, GER, SWI, COR, FRA, POR, SPA, ALB, BUL, GRC, ITA, ROM, SIC, YUG, KRY, KGZ, TZK, NCS, TCS, TUR","GHA, GUI, IVO, LBR, NGA, SIE, TOG, CAF, CMN, CON, GAB, ZAI","EHM, NEP, PAK, WHM","FIJ, SAM, MRQ, SCI, TUA, MRN, MXC, MXE, MXG, MXI, MXN, MXS, MXT, COS, ELS, GUA, HON, NIC, ARU, NLA, SWC, VNA, FRG, GUY, SUR, VEN, CLM, ECU, BZE","NCS, TCS, IRN, TUR",null,"ONT, ILL, IOW, KAN, MSO, NEB, OKL, WIS, CNT, INI, MAI, MAS, MIC, NWY, RHO, TEX, ALA, ARK, GEO, LOU, NCA, TEN, VRG","IRN, IRQ, TUR","DEN, FIN, FOR, GRB, ICE, IRE, NOR, SVA, SWE, AUT, BGM, CZE, GER, HUN, NET, POL, SWI, COR, FRA, POR, SPA, BUL, GRC, ITA, ROM, YUG, BLR, BLT, KRY, RUC, RUE, RUN, RUS, RUW, UKR, ALT, BRY, CTA, IRK, KRA, TVA, WSB, YAK, AMU, KAM, KHA, KUR, MAG, PRM, SAK, NCS, TCS, LBS, TUR, CHM, CHS, JAP, KOR, PHI, NWG, ALU, ASK, GNL, NUN, NWT, YUK, ABT, BRC, MAN, SAS, LAB, NFL, NSC, ONT, PEI, QUE, COL, IDA, MNT, ORE, WAS, ILL, IOW, MIN, NDA, WIS, CNT, INI, MAI, MAS, MIC, NWH, NWJ, NWY, OHI, PEN, RHO, VER, WVA, CAL, ALA, DEL, GEO, KTY, MRY, MSI, NCA, SCA, TEN, VRG, WDC","KRI, EGY, LBY","NCS, TCS","GRB, BGM, CZE, GER, POL, SWI, FRA, UKR","GRC, TZK, NCS, TCS, AFG, IRN, LBS, TUR, CHC, CHT, EHM, NEP, PAK, WHM","GEO, NCA, SCA","AUT, GER, HUN, NET, ALB, BUL, GRC, ITA, KRI, ROM, YUG, UKR, LBY, TUR","CAL, MXN","AFG, IRN, GST, OMA, YEM, PAK","ALG, TUN","MXE, MXG, MXS","BRC, MAN, SAS, NBR, NSC, ONT, QUE, COL, IDA, MNT, ORE, WAS, WYO, ILL, IOW, KAN, MIN, MSO, NDA, NEB, OKL, WIS, CNT, INI, MAI, MAS, MIC, NWH, NWJ, NWY, OHI, PEN, RHO, VER, WVA, ARI, CAL, UTA, NWM, TEX, ALA, DEL, FLA, GEO, KTY, LOU, MRY, MSI, NCA, SCA, TEN, VRG, WDC","VER, TEX, ALA, FLA, GEO, LOU, MSI","DEN, FIN, GRB, ICE, IRE, NOR, SWE, AUT, BGM, CZE, GER, HUN, NET, POL, SWI, COR, FRA, SPA, ALB, BUL, GRC, ITA, KRI, ROM, SIC, TUE, YUG, BLR, BLT, KRY, RUC, RUE, RUN, RUS, RUW, UKR, ALT, BRY, CTA, IRK, KRA, TVA, WSB, YAK, AMU, KAM, KHA, KUR, PRM, SAK, KAZ, KGZ, TZK, UZB, NCS, TCS, TUR, CHC, CHI, CHM, CHN, CHQ, CHS, CHX, MON, JAP, KOR, GNL","AFG, CHC, CHT, ASS, EHM, NEP, PAK, WHM, MYA","MXE, MXS","HUN, ALB, BUL, GRC, ROM, TUE, YUG, UKR, EAI, LBS, TUR","MAN, SAS, NBR, ONT, QUE, MNT, WYO, ILL, IOW, MIN, MSO, NDA, NEB, SDA, WIS, CNT, INI, MAI, MAS, MIC, NWH, NWJ, NWY, OHI, PEN, RHO, VER, WVA, GEO, MRY, VRG","CHC, CHN, CHS, JAP","MXC, MXS, MXT, BLZ, COS, ELS, GUA, HON, NIC, BAH, CAY, CUB, DOM, HAI, JAM, LEE, PUE, SWC, TRT, WIN, FRG, GUY, SUR, VEN, BOL, CLM, ECU, PER, BZC, BZE, BZL, BZN, BZS","GRB, NET, BAL, COR, FRA, POR, SAR, SPA, ALB, BUL, GRC, ITA, KRI, SIC, TUE, YUG, KRY, ALG, EGY, LBY, MOR, TUN, AZO, CNY, MDR, NCS, TCS, CYP, EAI, LBS, PAL, TUR","LAB, NBR, NFL, NSC, QUE, ILL, CNT, INI, MAI, MAS, MIC, NWH, NWJ, NWY, OHI, PEN, RHO, VER, WVA, DEL, GEO, KTY, MRY, NCA, SCA, TEN, VRG, WDC","GRC, TUE, NCS, TCS, TUR","TCS, IRN","MXC, MXE, MXG, MXS, MXT, ELS, GUA, HON","BAL, FRA, POR, SPA, ALB, ITA, SIC, YUG, ALG, LBY, MOR, TUN, CNY, MDR","KAZ, KGZ, CHX","GRB, IRE, SWE, BGM, CZE, GER, COR, FRA, POR, SAR, SPA, MOR","ASK, NUN, ABT, BRC, MAN, SAS, ONT, QUE, COL, IDA, MNT, ORE, WAS, WYO, WIS, MIC, ARI, CAL, NEV, UTA, NWM, MXE, MXN","AUT, BGM, CZE, GER, HUN, NET, POL, SWI, FRA, SPA, ALB, BUL, GRC, ITA, ROM, YUG, BLR, BLT, KRY, RUC, RUE, RUN, RUS, RUW, UKR, ALT, BRY, IRK, KRA, WSB, KAZ, KGZ, TKM, TZK, UZB, NCS, TCS, IRN, TUR, CHX",null,null,null,null,null,null,"GRC, KRI, ALG, TUN, CYP, EAI, LBS, PAL, TUR",null,null,"CZE, HUN, SWI, COR, FRA, SAR, SPA, ALB, BUL, GRC, ITA, ROM, SIC, TUE, YUG, KRY, RUE, RUS, UKR, ALT, WSB, PRM, KAZ, TKM, NCS, TCS, TUR, CHI, CHX",null,null,null,null,null,null,null,"CHC, CHT, ASS, EHM, NEP, WHM, MYA",null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"ALG",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[1,9,25,1,15,2,6,4,3,10,82,5,5,1,8,3,75,1,4,10,12,36,20,35,34,36,41,36,44,33,20,20,46,169,66,51,2,60,95,108,6,null,16,3,2,65,114,24,110,19,87,33,46,110,12,15,49,39,16,15,25,90,159,129,106,85,138,151,74,111,84,73,132,72,115,62,62,175,92,56,null,null,null,null,null,null,65,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,"EN","EW",null,null,null,null,"LC",null,null,null,null,null,null,null,null,"EN",null,null,null,null,null,null,null,"LC",null,null,"LC",null,null,null,null,null,"NT","LC",null,null,null,null,null,null,null,null,"LC",null,"VU","VU",null,null,null,"LC",null,null,null,null,"LR/nt",null,null,null,null,"LC",null,"DD","LC",null,"LC","LC","LC",null,"LC",null,null,null,null,null,null,null,null,null,"LC",null,null,null,null,null,null,null,null,null,"LC",null,null,null,null,null,null,null,null,null,null],["Endemic","Endemic","Endemic","Endemic","Endemic","Endemic","Endemic","Endemic","Endemic","Endemic","Endemic","Endemic","Not endemic","Not endemic","Not endemic","Not endemic","Endemic","Not endemic","Not endemic","Not endemic","Endemic","Endemic","Endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Endemic","Not endemic","Endemic","Endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic","Not endemic"],[3,2.9,2.6,2.5,2.5,2.5,2.1,2.1,2.1,2.1,2.1,2.1,2,2,2,2,2,2,2,2,1.6,1.6,1.6,1.5,1.5,1.5,1.5,1.5,1.5,1.5,1.5,1.5,1.5,1.4,1.2,1.2,1.1,1.1,1.1,1.1,1.1,1,1,1,1,0.8999999999999999,0.7999999999999999,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.5,0.5,0.2,0.2,0.2,0.2,0.2,0.2,0.2,0.2,0.2,0.2,0.2,0.2,0.2,0.2,0.2,0.2,0.2,0.2,0.2,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>TaxonName<\/th>\n      <th>TaxonNameFull<\/th>\n      <th>ProvenanceCode<\/th>\n      <th>POWO_powo_id<\/th>\n      <th>POWO_taxon_name<\/th>\n      <th>infrageneric_level<\/th>\n      <th>POWO_Dist_000_area_code_l3<\/th>\n      <th>POWO_Dist_010_area_code_l3<\/th>\n      <th>no_gardens<\/th>\n      <th>POWO_Red_category<\/th>\n      <th>endemic<\/th>\n      <th>value<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"pageLength":5,"columnDefs":[{"className":"dt-right","targets":[8,11]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script><hr>
<div class="section level3">
<h3 id="examples-of-other-value-conditions">Examples of other value conditions<a class="anchor" aria-label="anchor" href="#examples-of-other-value-conditions"></a>
</h3>
<p>Above we gave an example of giving items a value on provenance,
endemism, rarity of taxa globally and whether items are threatened. In
this section we will give other examples of conditions that can be used
when giving items a value.</p>
<div class="section level4">
<h4 id="value-on-a-particualar-native-location-">Value on a particualar native location.<a class="anchor" aria-label="anchor" href="#value-on-a-particualar-native-location-"></a>
</h4>
<p>We might want to give value to items that are native to the location
of the collection. For example if our collection is in Great Britain
then we could use the following:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">native_GB</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>column <span class="op">=</span> <span class="st">'POWO_Dist_000_area_code_l3'</span>, weight <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                  details <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'GBR'</span><span class="op">)</span>, value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span>, type <span class="op">=</span> <span class="st">'Grepl'</span><span class="op">)</span></span>
<span><span class="va">native_GB</span></span>
<span><span class="co">#&gt; $column</span></span>
<span><span class="co">#&gt; [1] "POWO_Dist_000_area_code_l3"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $weight</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $details</span></span>
<span><span class="co">#&gt;   names value</span></span>
<span><span class="co">#&gt; 1   GBR     1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $type</span></span>
<span><span class="co">#&gt; [1] "Grepl"</span></span></code></pre></div>
<p>We use <code>type = 'Grepl'</code> as this allows pattern searching
within the column of interest. In this case, if the code
<code>GBR</code> is found in the string of level 3 area codes that a
plant is distributed then they will gain a value of 1 otherwise no value
is added.</p>
</div>
<div class="section level4">
<h4 id="value-on-rarity-within-the-collection">Value on rarity within the collection<a class="anchor" aria-label="anchor" href="#value-on-rarity-within-the-collection"></a>
</h4>
<p>We will need to create a new column of the number of items in the
collection that are the same.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Assume we can use taxon name (i.e the collection doesn't have records with identical taxon name and differing authors)</span></span>
<span><span class="co"># Get the taxon name from POWO if matched otherwise use the original name in the collection</span></span>
<span><span class="va">taxon_name</span> <span class="op">=</span> <span class="va">collection</span><span class="op">$</span><span class="va">POWO_taxon_name</span></span>
<span><span class="va">taxon_name</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">taxon_name</span><span class="op">)</span><span class="op">]</span> <span class="op">=</span> <span class="va">collection</span><span class="op">$</span><span class="va">TaxonName</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">taxon_name</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Get the number of occurrences in the collection and add as `collection$count_in_collection`.</span></span>
<span><span class="va">taxon_name_count</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">taxon_name</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">count_in_collection</span> <span class="op">=</span> <span class="va">taxon_name_count</span><span class="op">$</span><span class="va">Freq</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/match.html" class="external-link">match</a></span><span class="op">(</span><span class="va">taxon_name</span>, <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">taxon_name_count</span><span class="op">$</span><span class="va">taxon_name</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">collection</span><span class="op">$</span><span class="va">count_in_collection</span> <span class="op">=</span> <span class="va">count_in_collection</span></span></code></pre></div>
<p>We can now use this column as a value condition</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">number_in_collection</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>column <span class="op">=</span> <span class="st">'count_in_collection'</span>, weight <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                  details <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'1'</span>, <span class="st">'2:3'</span>, <span class="st">'4:8'</span><span class="op">)</span>, value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0.5</span>, <span class="fl">0.2</span><span class="op">)</span><span class="op">)</span>, type <span class="op">=</span> <span class="st">'Number range (int)'</span><span class="op">)</span></span>
<span><span class="va">number_in_collection</span></span>
<span><span class="co">#&gt; $column</span></span>
<span><span class="co">#&gt; [1] "count_in_collection"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $weight</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $details</span></span>
<span><span class="co">#&gt;   names value</span></span>
<span><span class="co">#&gt; 1     1   1.0</span></span>
<span><span class="co">#&gt; 2   2:3   0.5</span></span>
<span><span class="co">#&gt; 3   4:8   0.2</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $type</span></span>
<span><span class="co">#&gt; [1] "Number range (int)"</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="discount-cultivars-">Discount cultivars.<a class="anchor" aria-label="anchor" href="#discount-cultivars-"></a>
</h4>
<p>Perhaps we do not like cultivars.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dislike_cultivars</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>column <span class="op">=</span> <span class="st">'infrageneric_level'</span>, weight <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                  details <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'cultivar'</span><span class="op">)</span>, value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span>, type <span class="op">=</span> <span class="st">'Grepl'</span><span class="op">)</span></span>
<span><span class="va">dislike_cultivars</span></span>
<span><span class="co">#&gt; $column</span></span>
<span><span class="co">#&gt; [1] "infrageneric_level"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $weight</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $details</span></span>
<span><span class="co">#&gt;      names value</span></span>
<span><span class="co">#&gt; 1 cultivar    -1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $type</span></span>
<span><span class="co">#&gt; [1] "Grepl"</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="value-for-finding-a-match-to-powo-">Value for finding a match to POWO.<a class="anchor" aria-label="anchor" href="#value-for-finding-a-match-to-powo-"></a>
</h4>
<p>Perhaps we want to add value if the item was found in POWO.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add column `in_POWO` with the detail required.</span></span>
<span><span class="va">in_POWO</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">'No'</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">collection</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">in_POWO</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">collection</span><span class="op">$</span><span class="va">POWO_powo_id</span><span class="op">)</span><span class="op">]</span> <span class="op">=</span> <span class="st">'Yes'</span></span>
<span><span class="va">collection</span><span class="op">$</span><span class="va">in_POWO</span> <span class="op">=</span> <span class="va">in_POWO</span></span>
<span></span>
<span><span class="co"># Create dependent.</span></span>
<span><span class="va">item_in_POWO</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>column <span class="op">=</span> <span class="st">'in_POWO'</span>, weight <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                  details <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Yes'</span><span class="op">)</span>, value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span>, type <span class="op">=</span> <span class="st">'Exact'</span><span class="op">)</span></span>
<span><span class="va">item_in_POWO</span></span>
<span><span class="co">#&gt; $column</span></span>
<span><span class="co">#&gt; [1] "in_POWO"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $weight</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $details</span></span>
<span><span class="co">#&gt;   names value</span></span>
<span><span class="co">#&gt; 1   Yes     1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $type</span></span>
<span><span class="co">#&gt; [1] "Exact"</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="value-for-a-continuous-numeric-column">Value for a continuous numeric column<a class="anchor" aria-label="anchor" href="#value-for-a-continuous-numeric-column"></a>
</h4>
<p>Suppose we want to gives values for a column that has non-whole
number values. Then we can use the type = ‘Number range’. Note that this
has the same range format as <code>'Number range (int)'</code>, namely
XX:YY. The matching condition is now where elements E are between XX and
YY by <span class="math inline">\(E \geq XX \text{ and } E \leq
YY\)</span>.</p>
<p>We give an example below where we first create a fake column of data
by sampling from the standard uniform distribution.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create and add the new_column to the collection.</span></span>
<span><span class="va">new_column</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">collection</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">collection</span><span class="op">$</span><span class="va">new_column</span> <span class="op">=</span> <span class="va">new_column</span></span>
<span></span>
<span><span class="co"># Show the first 10 values of the new column.</span></span>
<span><span class="va">collection</span><span class="op">$</span><span class="va">new_column</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span>
<span><span class="co">#&gt;  [1] 0.12466605 0.63369790 0.99662142 0.53551867 0.83278579 0.09366505</span></span>
<span><span class="co">#&gt;  [7] 0.31696444 0.28686695 0.27152280 0.69465540</span></span>
<span></span>
<span><span class="co"># Create dependent.</span></span>
<span><span class="va">non_integer_score</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>column <span class="op">=</span> <span class="st">'new_column'</span>, weight <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                  details <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'0:0.25'</span>, <span class="st">'0.25:0.75'</span>,<span class="st">'0.75:1'</span><span class="op">)</span>, value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0.5</span>, <span class="fl">0.1</span><span class="op">)</span><span class="op">)</span>, type <span class="op">=</span> <span class="st">'Number range'</span><span class="op">)</span></span>
<span><span class="va">non_integer_score</span></span>
<span><span class="co">#&gt; $column</span></span>
<span><span class="co">#&gt; [1] "new_column"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $weight</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $details</span></span>
<span><span class="co">#&gt;       names value</span></span>
<span><span class="co">#&gt; 1    0:0.25   1.0</span></span>
<span><span class="co">#&gt; 2 0.25:0.75   0.5</span></span>
<span><span class="co">#&gt; 3    0.75:1   0.1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $type</span></span>
<span><span class="co">#&gt; [1] "Number range"</span></span></code></pre></div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Jake Powell.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
